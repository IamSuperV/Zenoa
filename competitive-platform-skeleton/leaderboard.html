<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard - Zenoa</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="js/guard.js"></script>
    <style>
        .hidden {
            display: none !important;
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="container flex justify-between items-center">
            <a href="index.html" class="nav-logo">ZENOA</a>
            <div class="flex items-center gap-4">
                <a href="dashboard.html" class="nav-link">Dashboard</a>
            </div>
        </div>
    </nav>

    <main class="container p-8">
        <div class="flex justify-between items-end mb-8">
            <div>
                <h1 class="mb-2">Leaderboard</h1>
                <p>Global Rankings (Top 10)</p>
            </div>
        </div>

        <div class="card p-0 overflow-hidden">
            <table class="table" id="leaderboardTable">
                <thead>
                    <tr>
                        <th class="w-12">Rank</th>
                        <th>Player ID</th>
                        <th>Matches</th>
                        <th class="text-right">SR (Skill Rating)</th>
                    </tr>
                </thead>
                <tbody id="leaderboardBody">
                    <tr>
                        <td colspan="4" class="text-center p-8">Loading rankings...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <script type="module">
        import { getLeaderboard } from './js/data.js';

        async function loadLeaderboard() {
            const data = await getLeaderboard();
            const tbody = document.getElementById('leaderboardBody');
            tbody.innerHTML = '';

            if (data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" class="text-center p-8">No ranked players yet. Be the first!</td></tr>';
                return;
            }

            data.forEach((user, index) => {
                let tierClass = "tier-rookie";
                if (user.sr > 1500) tierClass = "tier-strategist";
                if (user.sr > 2000) tierClass = "tier-apex";

                tbody.innerHTML += `
                    <tr>
                        <td class="font-bold text-lg">${index + 1}</td>
                        <td>${user.id.substring(0, 6)}...</td>
                        <td>${user.matchesPlayed}</td>
                        <td class="text-right font-mono font-bold">
                            <span class="badge ${tierClass}">${user.sr || 0}</span>
                        </td>
                    </tr>
                `;
            });
        }

        loadLeaderboard();
    </script>
</body>

</html>